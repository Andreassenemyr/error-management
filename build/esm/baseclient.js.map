{"version":3,"file":"baseclient.js","sources":["../../src/baseclient.ts"],"sourcesContent":["import { Scope } from \"./index\";\nimport { getEnvelopeEndpointWithUrlEncodedAuth } from \"./api\";\nimport { Client } from \"./client\";\nimport { HostComponent, createDSN } from \"./dsn\";\nimport { ClientOptions } from \"./options\";\nimport { Transport, TransportMakeRequestResponse } from \"./transport\";\nimport { logger } from \"./utils/logger\";\nimport { v4 as uuidv4 } from 'uuid';\nimport { checkOrSetAlreadyCaught, parseSampleRate } from \"./utils/misc\";\nimport { Envelope, ErrorEvent, Event, EventEnvelope, EventHint, SeverityLevel } from \"./types\";\nimport { SyncPromise, isThenable, rejectedSyncPromise, resolvedSyncPromise } from \"./transport/syncpromise\";\nimport { RibbanError } from \"./utils/error\";\nimport { DataCategory, createEventEnvelope, createSessionEnvelope } from \"./envelope\";\nimport { prepareEvent } from \"./utils/prepare-event\";\nimport { Session, SessionAggregates } from \"./session\";\nimport { isPlainObject, isPrimitive } from \"./utils/object\";\nimport { getIsolationScope } from \"./current-scopes\";\n\nexport abstract class BaseClient<O extends ClientOptions> implements Client<O> {\n    protected readonly options: O;\n\n    protected readonly _dsn?: HostComponent;\n    protected readonly _transport?: Transport\n\n    protected _numProcessing: number;\n\n    constructor(options: O) {\n        this.options = options;\n        this._numProcessing = 0;\n\n        if (options.dsn) {\n            this._dsn = createDSN(options.dsn);\n        } else {\n            logger.warn('No DSN was provided, the client will not send any requests.')\n        }\n\n        console.log(this._dsn)\n\n        if (this._dsn) {\n            const url = getEnvelopeEndpointWithUrlEncodedAuth(\n                this._dsn,\n                this.options.tunnel\n            )\n\n            this._transport = options.transport({\n                tunnel: this.options.tunnel,\n                ...options.transportOptions,\n                url: url,\n            })\n        }\n    };\n    \n    public captureException(exception: any, hint?: EventHint | undefined, currentScope?: Scope | undefined): string {\n        const eventId = uuidv4();\n\n        if (checkOrSetAlreadyCaught(exception)) {\n            logger.log('An exception has been already caught, will not send it again');\n            return eventId;\n        }\n\n        console.log(\"Message in BaseClient: \" + exception.message);\n\n        const hintWithEventId = {\n            event_id: eventId,\n            ...hint,\n        };\n\n        this._process(this.eventFromException(exception, hintWithEventId).then((event) => \n            this._captureEvent(event, hintWithEventId, currentScope),\n        ));\n\n        console.log(hintWithEventId.event_id);\n\n        return hintWithEventId.event_id;\n    };\n\n    \n    sendSession(session: Session | SessionAggregates): void {\n        const env = createSessionEnvelope(session, this._dsn, this.options.tunnel);\n\n        this.sendEnvelope(env);\n    }\n\n    captureEvent(event: Event, hint?: EventHint | undefined, currentScope?: Scope | undefined): string {\n        const eventId = uuidv4();\n\n        if (hint && hint.originalException && checkOrSetAlreadyCaught(hint.originalException)) {\n            logger.log('An exception has been already caught, will not send it again');\n            return eventId;\n        }\n\n        const hintWithEventId = {\n            event_id: eventId,\n            ...hint,\n        };\n\n        this._process(this._captureEvent(event, hintWithEventId, currentScope));\n\n        return hintWithEventId.event_id;\n    };\n\n    public abstract eventFromException(_exception: any, _hint?: EventHint): PromiseLike<Event>;\n\n    public getDsn(): HostComponent | undefined {\n        return this._dsn;\n    }\n\n    public getOptions(): O {\n        return this.options\n    }\n    \n\n    public sendEvent(event: Event, hint: EventHint = {}): void {\n        this.emit('beforeSendEvent', event, hint);\n\n        let envelope = createEventEnvelope(event, this._dsn, this.options.tunnel);\n\n        console.log(envelope)\n\n        const promise = this.sendEnvelope(envelope);\n        if (promise) {\n            promise.then(sendResponse => this.emit('afterSendEvent', event, sendResponse));\n        }\n    }\n\n    public sendEnvelope(envelope: Envelope): PromiseLike<TransportMakeRequestResponse> {\n        console.log('sending')\n\n        this.emit('beforeEnvelope', envelope);\n\n        if (this._isEnabled() && this._transport) {\n            console.log('Sending envelope');\n\n            return this._transport.send(envelope).then(null, (errorReason) => {\n                console.error(`Error while sending event: ${errorReason}`);\n                return errorReason;\n            })\n        }\n\n        console.error('Transport is disabled.', this._isEnabled(), this._transport);\n        return resolvedSyncPromise({});\n    }\n    \n    emit(hook: \"beforeEnvelope\", envelope: Envelope): void;\n    emit(hook: \"beforeSendEvent\", event: Event, hint?: EventHint | undefined): void;\n    emit(hook: \"preprocessEvent\", event: Event, hint?: EventHint | undefined): void;\n    emit(hook: \"afterSendEvent\", event: Event, sendResponse: TransportMakeRequestResponse): void;\n    emit(hook: \"flush\"): void;\n    emit(hook: \"close\"): void;\n    emit(hook: unknown, event?: unknown, sendResponse?: unknown): void {\n        \n    }\n\n    protected _prepareEvent(event: Event, hint: EventHint, currentScope?: Scope | undefined, isolationScope = getIsolationScope()): PromiseLike<Event | null> {\n        const options = this.getOptions();\n\n        this.emit('preprocessEvent', event, hint);\n\n        return prepareEvent(options, event, hint, currentScope, this).then((event) => {\n            if (event === null) {\n                return event;\n            }\n\n\n            return event;\n        })\n    };\n\n    captureMessage(message: string, level?: SeverityLevel | undefined, hint?: EventHint | undefined, currentScope?: Scope | undefined): string {\n        const hintWithEventId = {\n            event_id: uuidv4(),\n            ...hint,\n        };\n\n        const eventMessge = String(message);\n\n        const promisedEvent = isPrimitive(message) \n            ? this.eventFromException(eventMessge, hintWithEventId)\n            : this.eventFromException(eventMessge, hintWithEventId);\n\n        this._process(promisedEvent.then((event) => this._captureEvent(event, hintWithEventId, currentScope)));\n\n        return hintWithEventId.event_id;\n    }\n\n    captureSession(session: Session): void {\n        \n    }\n\n    getTransport(): Transport | undefined {\n        return this._transport;\n    }\n\n    close(timeout?: number | undefined): PromiseLike<boolean> {\n        return this.flush(timeout).then((result) => {\n            this.getOptions().enabled = false;\n            this.emit('close');\n            return result;\n        })\n    }\n\n    flush(timeout?: number | undefined): PromiseLike<boolean> {\n        const transport = this._transport;\n        if (transport) {\n            this.emit('flush');\n            return this._isClientDoneProcessing(timeout).then((done) => {\n                return transport.flush(timeout).then((transportFlushed) => done && transportFlushed);\n            });\n        } else {\n            return resolvedSyncPromise(true);   \n        }\n    }\n\n    init(): void {\n        if (this._isEnabled()) {\n            \n        }\n    }\n\n    protected _isClientDoneProcessing(timeout?: number): PromiseLike<boolean> {\n        return new SyncPromise(resolve => {\n            let ticked: number = 0;\n            const tick: number = 1;\n            \n            const interval = setInterval(() => {\n                if (this._numProcessing == 0) {\n                    clearInterval(interval);\n                    resolve(true);\n                } else {\n                    ticked += tick;\n                    if (timeout && ticked >= timeout) {\n                        clearInterval(interval);\n                        resolve(false);\n                    }\n                }\n            }, tick);\n        });\n    }\n\n    protected _captureEvent(event: Event, hint: EventHint = {}, scope?: Scope): PromiseLike<string | undefined> {\n        return this._processEvent(event, hint, scope).then((finalEvent) => {\n                return finalEvent.event_id;\n            },\n            (reason) => {\n                const ribbanError = reason as RibbanError;\n                if (ribbanError.logLevel === 'log') {\n                    console.log(\"LOG - \" +  ribbanError.message);\n                } else {\n                    console.log(\"ERROR - \" +  ribbanError);\n                }\n\n                return undefined;\n            },\n        );\n    }\n\n    protected _processEvent(event: Event, hint: EventHint, currentScope?: Scope): PromiseLike<Event> {\n        const options = this.getOptions();\n        const { sampleRate } = options;\n\n        const isError = isErrorEvent(event);\n        const eventType = event.type || 'error';\n        const beforeSendLabel = `before send for type \\`${eventType}\\``;\n\n        const parsedSampleRate = typeof sampleRate === 'undefined' ? undefined : parseSampleRate(sampleRate);\n        if (isError && typeof parsedSampleRate === 'number' && Math.random() > parsedSampleRate) {\n            logger.log(`Item Sampling decision: dropped event with sampleRate ${parsedSampleRate}`);\n            return rejectedSyncPromise(new RibbanError(\n                `Discarding event because it's not included in the random sample (sampling rate = ${sampleRate})`,\n                'log',\n            ));\n        };\n\n        const dataCategory: DataCategory = eventType === 'replay_event' ? 'replay' : eventType;\n\n        return this._prepareEvent(event, hint, currentScope).then((prepared) => {\n            if (prepared === null) {\n                throw new RibbanError('An event processor returned null, will not send event.', 'log');\n            }\n\n            const isInternalException = hint.data && (hint.data as { __ribban__: boolean }).__ribban__ === true;\n            if (isInternalException) {\n                return prepared;\n            }\n\n            const result = processBeforeSend(options, prepared, hint);\n            return _validateBeforeSendResult(result, beforeSendLabel);\n        }).then((processed) => {\n            if (processed === null) {\n                throw new RibbanError(`${beforeSendLabel} returned \\`null\\`, will not send event.`, 'log');\n            }\n\n            console.log('SENDING EVENT ', processed.event_id)\n\n            this.sendEvent(processed, hint);\n            return processed;\n        }).then(null, (reason) => {\n            if (reason instanceof RibbanError) {\n                throw reason;\n            }\n        \n            this.captureException(reason, {\n                data: {\n                    __ribban__: true,\n                },\n                originalException: reason\n            });\n\n            throw new RibbanError(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\\nReason: ${reason}`);\n        })\n    }\n    \n    on(hook: \"beforeEnvelope\", callback: (envelope: EventEnvelope) => void): void;\n    on(hook: \"beforeSendEvent\", callback: (event: Event, hint?: EventHint | undefined) => void): void;\n    on(hook: \"preprocessEvent\", callback: (event: Event, hint?: EventHint | undefined) => void): void;\n    on(hook: \"afterSendEvent\", callback: (event: Event, sendResponse: TransportMakeRequestResponse) => void): void;\n    on(hook: \"flush\", callback: () => void): void;\n    on(hook: \"close\", callback: () => void): void;\n    on(hook: string, callback: unknown): void {\n        \n    }\n\n    protected _isEnabled(): boolean {\n        return this.getOptions().enabled !== false && this._transport !== undefined;\n    }\n\n    protected _process<T>(promise: PromiseLike<T>): void {\n        this._numProcessing++;\n        void promise.then((value) => {\n            this._numProcessing--;\n            return value;\n        }, (reason) => {\n            this._numProcessing--;\n            return reason;\n        });\n    }\n}\n\nfunction _validateBeforeSendResult(\n    beforeSendResult: PromiseLike<Event | null> | Event | null,\n    beforeSendLabel: string\n): PromiseLike<Event | null> | Event | null {\n    const invalidValueError = `${beforeSendLabel} method has to return 'null' or a valid event.`;\n    if (isThenable(beforeSendResult)) {\n        return beforeSendResult.then((processed) => {\n            if (!isPlainObject(processed) && event !== null) {\n                throw new RibbanError(invalidValueError);\n            }\n\n            return processed;\n        }, (error) => {\n            throw new RibbanError(`${beforeSendLabel} rejected with ${error}`);\n        });\n    } else if (!isPlainObject(beforeSendResult) && beforeSendResult !== null) {\n        throw new RibbanError(invalidValueError);\n    }\n\n    return beforeSendResult;\n};\n\nfunction processBeforeSend(\n    options: ClientOptions,\n    event: Event,\n    hint: EventHint,\n): PromiseLike<Event | null> | Event | null {\n    return event;\n}\n\n\nfunction isErrorEvent(event: Event): event is ErrorEvent {\n    return event.type === undefined;\n}"],"names":["uuidv4"],"mappings":"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"}