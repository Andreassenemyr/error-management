{"version":3,"file":"init.js","sources":["../../src/init.ts"],"sourcesContent":["import { BrowserClient, BrowserClientOptions, BrowserOptions, Client, setCurrentClient } from \"./client\";\r\nimport { getCurrentScope } from \"./current-scopes\";\r\nimport { ClientOptions } from \"./options\";\r\nimport { defaultStackParser } from \"./stack-parsers\";\r\nimport { makeFetchTransport } from \"./transport/fetch\";\r\nimport { stackParserFromStackParserOptions } from \"./types/stacktrace\";\r\nimport { logger } from \"./utils/logger\";\r\nimport { dropUndefinedKeys } from \"./utils/object\";\r\n\r\nexport function init(options: BrowserOptions = {}): void {\r\n    const newOptions = applyDefaultOptions(options);\r\n\r\n    console.log('Test Client')\r\n    \r\n    const clientOptions: BrowserClientOptions = {\r\n        ...newOptions,\r\n        stackParser: stackParserFromStackParserOptions(options.stackParser || defaultStackParser),\r\n        transport: options.transport || makeFetchTransport,\r\n    };\r\n\r\n    initAndBind(BrowserClient, clientOptions);\r\n}\r\n\r\nfunction applyDefaultOptions(options: BrowserOptions = {}): BrowserOptions {\r\n    const defaultOptions: BrowserOptions = {\r\n        autoSessionTracking: true,\r\n    };\r\n\r\n    return { ...defaultOptions, ...options };\r\n}\r\n\r\nexport type ClientClass<F extends Client, O extends ClientOptions> = new (options: O) => F;\r\n\r\nfunction initAndBind<F extends Client, O extends ClientOptions>(\r\n    clientClass: ClientClass<F, O>,\r\n    options: O\r\n): void {\r\n    if (options.debug === true) {\r\n        logger.enable();\r\n    };\r\n\r\n    const scope = getCurrentScope();\r\n    scope.update(options.initialScope);\r\n    \r\n    const client = new clientClass(options);\r\n    setCurrentClient(client);\r\n    client.init();\r\n}\r\n"],"names":[],"mappings":";;;;;;;AASO,SAAS,IAAI,CAAC,OAAO,GAAmB,EAAE,EAAQ;AACzD,IAAI,MAAM,UAAW,GAAE,mBAAmB,CAAC,OAAO,CAAC,CAAA;;AAEnD,IAAI,OAAO,CAAC,GAAG,CAAC,aAAa,EAAA;;AAE7B,IAAI,MAAM,aAAa,GAAyB;AAChD,QAAQ,GAAG,UAAU;AACrB,QAAQ,WAAW,EAAE,iCAAiC,CAAC,OAAO,CAAC,WAAA,IAAe,kBAAkB,CAAC;AACjG,QAAQ,SAAS,EAAE,OAAO,CAAC,SAAA,IAAa,kBAAkB;AAC1D,KAAK,CAAA;;AAEL,IAAI,WAAW,CAAC,aAAa,EAAE,aAAa,CAAC,CAAA;AAC7C,CAAA;;AAEA,SAAS,mBAAmB,CAAC,OAAO,GAAmB,EAAE,EAAkB;AAC3E,IAAI,MAAM,cAAc,GAAmB;AAC3C,QAAQ,mBAAmB,EAAE,IAAI;AACjC,KAAK,CAAA;;AAEL,IAAI,OAAO,EAAE,GAAG,cAAc,EAAE,GAAG,SAAS,CAAA;AAC5C,CAAA;;AAIA,SAAS,WAAW;AACpB,IAAI,WAAW;AACf,IAAI,OAAO;AACX,EAAQ;AACR,IAAI,IAAI,OAAO,CAAC,KAAM,KAAI,IAAI,EAAE;AAChC,QAAQ,MAAM,CAAC,MAAM,EAAE,CAAA;AACvB;AAEA,IAAI,MAAM,KAAA,GAAQ,eAAe,EAAE,CAAA;AACnC,IAAI,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,YAAY,CAAC,CAAA;;AAEtC,IAAI,MAAM,MAAO,GAAE,IAAI,WAAW,CAAC,OAAO,CAAC,CAAA;AAC3C,IAAI,gBAAgB,CAAC,MAAM,CAAC,CAAA;AAC5B,IAAI,MAAM,CAAC,IAAI,EAAE,CAAA;AACjB;;;;"}