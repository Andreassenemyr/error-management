{"version":3,"file":"init.js","sources":["../../src/init.ts"],"sourcesContent":["import { BrowserClient, BrowserClientOptions, BrowserOptions, Client, setCurrentClient } from \"./client\";\nimport { getCurrentScope } from \"./current-scopes\";\nimport { ClientOptions } from \"./options\";\nimport { defaultStackParser } from \"./stack-parsers\";\nimport { makeFetchTransport } from \"./transport/fetch\";\nimport { stackParserFromStackParserOptions } from \"./types/stacktrace\";\nimport { logger } from \"./utils/logger\";\nimport { dropUndefinedKeys } from \"./utils/object\";\n\nexport function init(options: BrowserOptions = {}): void {\n    const newOptions = applyDefaultOptions(options);\n\n    console.log('Test Client')\n    \n    const clientOptions: BrowserClientOptions = {\n        ...newOptions,\n        stackParser: stackParserFromStackParserOptions(options.stackParser || defaultStackParser),\n        transport: options.transport || makeFetchTransport,\n    };\n\n    initAndBind(BrowserClient, clientOptions);\n}\n\nfunction applyDefaultOptions(options: BrowserOptions = {}): BrowserOptions {\n    const defaultOptions: BrowserOptions = {\n        autoSessionTracking: true,\n    };\n\n    return { ...defaultOptions, ...options };\n}\n\nexport type ClientClass<F extends Client, O extends ClientOptions> = new (options: O) => F;\n\nfunction initAndBind<F extends Client, O extends ClientOptions>(\n    clientClass: ClientClass<F, O>,\n    options: O\n): void {\n    if (options.debug === true) {\n        logger.enable();\n    };\n\n    const scope = getCurrentScope();\n    scope.update(options.initialScope);\n    \n    const client = new clientClass(options);\n    setCurrentClient(client);\n    client.init();\n}\n"],"names":[],"mappings":";;;;;;;AASO,SAAS,IAAI,CAAC,OAAO,GAAmB,EAAE,EAAQ;AACzD,IAAI,MAAM,UAAW,GAAE,mBAAmB,CAAC,OAAO,CAAC,CAAA;AACnD;AACA,IAAI,OAAO,CAAC,GAAG,CAAC,aAAa,EAAA;;AAE7B,IAAI,MAAM,aAAa,GAAyB;AAChD,QAAQ,GAAG,UAAU;AACrB,QAAQ,WAAW,EAAE,iCAAiC,CAAC,OAAO,CAAC,WAAA,IAAe,kBAAkB,CAAC;AACjG,QAAQ,SAAS,EAAE,OAAO,CAAC,SAAA,IAAa,kBAAkB;AAC1D,KAAK,CAAA;AACL;AACA,IAAI,WAAW,CAAC,aAAa,EAAE,aAAa,CAAC,CAAA;AAC7C,CAAA;AACA;AACA,SAAS,mBAAmB,CAAC,OAAO,GAAmB,EAAE,EAAkB;AAC3E,IAAI,MAAM,cAAc,GAAmB;AAC3C,QAAQ,mBAAmB,EAAE,IAAI;AACjC,KAAK,CAAA;AACL;AACA,IAAI,OAAO,EAAE,GAAG,cAAc,EAAE,GAAG,SAAS,CAAA;AAC5C,CAAA;;AAIA,SAAS,WAAW;AACpB,IAAI,WAAW;AACf,IAAI,OAAO;AACX,EAAQ;AACR,IAAI,IAAI,OAAO,CAAC,KAAM,KAAI,IAAI,EAAE;AAChC,QAAQ,MAAM,CAAC,MAAM,EAAE,CAAA;AACvB,KACA;AACA,IAAI,MAAM,KAAA,GAAQ,eAAe,EAAE,CAAA;AACnC,IAAI,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,YAAY,CAAC,CAAA;;AAEtC,IAAI,MAAM,MAAO,GAAE,IAAI,WAAW,CAAC,OAAO,CAAC,CAAA;AAC3C,IAAI,gBAAgB,CAAC,MAAM,CAAC,CAAA;AAC5B,IAAI,MAAM,CAAC,IAAI,EAAE,CAAA;AACjB;;;;"}