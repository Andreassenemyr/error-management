{"version":3,"file":"scope.js","sources":["../../src/scope.ts"],"sourcesContent":["import { logger } from \"./utils/logger\";\nimport { CaptureContext, Extra, Extras, ScopeContext, Scope as ScopeInterface } from \"./index\";\nimport { RequestSession, Session } from \"./session\";\nimport { Client } from \"./client\";\nimport { Event, EventHint, SeverityLevel } from \"./types\";\nimport { v4 as uuid4 } from \"uuid\";\nimport { isPlainObject } from \"./utils/object\";\n\nexport interface ScopeData {\n  tags: { [key: string]: Primitive };\n  extra: Extras;\n  sdkProcessingMetadata: { [key: string]: unknown };\n  fingerprint: string[];\n  level?: SeverityLevel;\n  transactionName?: string;\n}\n\nexport type Primitive = number | string | boolean | bigint | symbol | null | undefined;\n\nexport class Scope implements ScopeInterface {\n    /** Flag if notifying is happening. */\n    protected _notifyingListeners: boolean;\n  \n    /** Callback for client to receive scope changes. */\n    protected _scopeListeners: Array<(scope: Scope) => void>;\n\n    protected _level?: SeverityLevel;\n  \n    /** Tags */\n    protected _tags: { [key: string]: Primitive };\n  \n    /** Extra */\n    protected _extra: Extras;\n  \n    /**\n     * A place to stash data which is needed at some point in the SDK's event processing pipeline but which shouldn't get\n     * sent to Ribban\n     */\n    protected _sdkProcessingMetadata: { [key: string]: unknown };\n  \n    /** Fingerprint */\n    protected _fingerprint?: string[];\n    /**\n     * Transaction Name\n     *\n     * IMPORTANT: The transaction name on the scope has nothing to do with root spans/transaction objects.\n     * It's purpose is to assign a transaction to the scope that's added to non-transaction events.\n     */\n    protected _transactionName?: string;\n  \n    /** Session */\n    protected _session?: Session;\n  \n    /** Request Mode Session Status */\n    protected _requestSession?: RequestSession;\n  \n    /** The client on this scope */\n    protected _client?: Client;\n  \n    // NOTE: Any field which gets added here should get added not only to the constructor but also to the `clone` method.\n  \n    public constructor() {\n      this._notifyingListeners = false;\n      this._scopeListeners = [];\n      this._tags = {};\n      this._extra = {};\n      this._sdkProcessingMetadata = {};\n    }\n  \n    /**\n     * @inheritDoc\n     */\n    public clone(): Scope {\n      const newScope = new Scope();\n      newScope._tags = { ...this._tags };\n      newScope._extra = { ...this._extra };\n      newScope._session = this._session;\n      newScope._transactionName = this._transactionName;\n      newScope._fingerprint = this._fingerprint;\n      newScope._requestSession = this._requestSession;\n      newScope._sdkProcessingMetadata = { ...this._sdkProcessingMetadata };\n      newScope._client = this._client;\n    \n      return newScope;\n    }\n  \n  \n    /**\n     * @inheritDoc\n     */\n    public getClient<C extends Client>(): C | undefined {\n      return this._client as C | undefined;\n    }\n  \n    /**\n     * @inheritDoc\n     */\n    public getRequestSession(): RequestSession | undefined {\n      return this._requestSession;\n    }\n  \n    /**\n     * @inheritDoc\n     */\n    public setRequestSession(requestSession?: RequestSession): this {\n      this._requestSession = requestSession;\n      return this;\n    }\n\n    addScopeListener(callback: (scope: ScopeInterface) => void): void {\n      this._scopeListeners.push(callback);\n    }\n\n    public setClient(client: Client | undefined): void {\n        this._client = client;\n    }\n\n  \n    /**\n     * @inheritDoc\n     */\n    public setTags(tags: { [key: string]: Primitive }): this {\n      this._tags = {\n        ...this._tags,\n        ...tags,\n      };\n      this._notifyScopeListeners();\n      return this;\n    }\n  \n    /**\n     * @inheritDoc\n     */\n    public setTag(key: string, value: Primitive): this {\n      this._tags = { ...this._tags, [key]: value };\n      this._notifyScopeListeners();\n      return this;\n    }\n  \n    /**\n     * @inheritDoc\n     */\n    public setExtras(extras: Extras): this {\n      this._extra = {\n        ...this._extra,\n        ...extras,\n      };\n      this._notifyScopeListeners();\n      return this;\n    }\n  \n    /**\n     * @inheritDoc\n     */\n    public setExtra(key: string, extra: Extra): this {\n      this._extra = { ...this._extra, [key]: extra };\n      return this;\n    }\n  \n    /**\n     * @inheritDoc\n     */\n    public setFingerprint(fingerprint: string[]): this {\n      this._fingerprint = fingerprint;\n      return this;\n    }\n  \n    /**\n     * @inheritDoc\n     */\n    public setLevel(level: SeverityLevel): this {\n      this._level = level;\n      this._notifyScopeListeners();\n      return this;\n    }\n  \n    /**\n     * @inheritDoc\n     */\n    public setTransactionName(name?: string): this {\n      this._transactionName = name;\n      this._notifyScopeListeners();\n      return this;\n    }\n  \n    /**\n     * @inheritDoc\n     */\n    public setSession(session?: Session): this {\n      if (!session) {\n        delete this._session;\n      } else {\n        this._session = session;\n      }\n      this._notifyScopeListeners();\n      return this;\n    }\n  \n    /**\n     * @inheritDoc\n     */\n    public getSession(): Session | undefined {\n      return this._session;\n    }\n  \n    /**\n     * @inheritDoc\n     */\n    public update(captureContext?: CaptureContext): this {\n      if (!captureContext) {\n        return this;\n      }\n  \n      const scopeToMerge = typeof captureContext === 'function' ? captureContext(this) : captureContext;\n  \n      const [scopeInstance, requestSession] =\n        scopeToMerge instanceof Scope\n          ? [scopeToMerge.getScopeData(), scopeToMerge.getRequestSession()]\n          : isPlainObject(scopeToMerge)\n            ? [captureContext as ScopeContext, (captureContext as ScopeContext).requestSession]\n            : [];\n  \n      const { tags, extra, level, fingerprint = [] } = scopeInstance || {};\n  \n      this._tags = { ...this._tags, ...tags };\n      this._extra = { ...this._extra, ...extra };\n  \n  \n      if (level) {\n        this._level = level;\n      }\n  \n      if (fingerprint.length) {\n        this._fingerprint = fingerprint;\n      }\n  \n      if (requestSession) {\n        this._requestSession = requestSession;\n      }\n  \n      return this;\n    }\n  \n    /**\n     * @inheritDoc\n     */\n    public clear(): this {\n      // client is not cleared here on purpose!\n      this._tags = {};\n      this._extra = {};\n      this._level = undefined;\n      this._transactionName = undefined;\n      this._fingerprint = undefined;\n      this._requestSession = undefined;\n      this._session = undefined;\n\n      this._notifyScopeListeners();\n      return this;\n    }\n\n    /** @inheritDoc */\n    public getScopeData(): ScopeData {\n      return {\n        tags: this._tags,\n        extra: this._extra,\n        level: this._level,\n        fingerprint: this._fingerprint || [],\n        sdkProcessingMetadata: this._sdkProcessingMetadata,\n        transactionName: this._transactionName,\n      };\n    }\n  \n    /**\n     * @inheritDoc\n     */\n    public setSDKProcessingMetadata(newData: { [key: string]: unknown }): this {\n      this._sdkProcessingMetadata = { ...this._sdkProcessingMetadata, ...newData };\n  \n      return this;\n    }\n\n  \n    /**\n     * @inheritDoc\n     */\n    public captureException(exception: unknown, hint?: EventHint): string {\n      const eventId = hint && hint.event_id ? hint.event_id : uuid4();\n  \n      if (!this._client) {\n        console.warn('No client configured on scope - will not capture exception!');\n        return eventId;\n      }\n  \n      const syntheticException = new Error('Ribban syntheticException');\n  \n      this._client.captureException(\n        exception,\n        {\n          originalException: exception,\n          syntheticException,\n          ...hint,\n          event_id: eventId,\n        },\n        this,\n      );\n  \n      return eventId;\n    }\n  \n    /**\n     * @inheritDoc\n     */\n    public captureMessage(message: string, level?: SeverityLevel, hint?: EventHint): string {\n      const eventId = hint && hint.event_id ? hint.event_id : uuid4();\n  \n      if (!this._client) {\n        console.warn('No client configured on scope - will not capture message!');\n        return eventId;\n      }\n  \n      const syntheticException = new Error(message);\n  \n      this._client.captureMessage(\n        message,\n        level,\n        {\n          originalException: message,\n          syntheticException,\n          ...hint,\n          event_id: eventId,\n        },\n        this,\n      );\n  \n      return eventId;\n    }\n  \n    /**\n     * @inheritDoc\n     */\n    public captureEvent(event: Event, hint?: EventHint): string {\n      const eventId = hint && hint.event_id ? hint.event_id : uuid4();\n  \n      if (!this._client) {\n        console.warn('No client configured on scope - will not capture event!');\n        return eventId;\n      }\n  \n      this._client.captureEvent(event, { ...hint, event_id: eventId }, this);\n  \n      return eventId;\n    }\n  \n    /**\n     * This will be called on every set call.\n     */\n    protected _notifyScopeListeners(): void {\n      // We need this check for this._notifyingListeners to be able to work on scope during updates\n      // If this check is not here we'll produce endless recursion when something is done with the scope\n      // during the callback.\n      if (!this._notifyingListeners) {\n        this._notifyingListeners = true;\n        this._scopeListeners.forEach(callback => {\n          callback(this);\n        });\n        this._notifyingListeners = false;\n      }\n    }\n}\n"],"names":["isPlainObject","uuid4"],"mappings":"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"}